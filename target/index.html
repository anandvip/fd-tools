<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FD Time Calculator - Indian Banking System</title>
    <style>
        /*
        Date Created: November 19, 2025
        Tool: Claude Sonnet 4.5
        Prompt: Create a tool for Indian banking system to calculate for user-fed amount, 
        fixed deposit rate of interest, and targeted capital amount. Calculate how long it 
        will take to reach the target amount showing years, months, days with quarterly 
        compounding. Include maturity breakdown, rate comparison, TDS info, visual timeline, 
        and memory retention features.
        
        README.md:
        # Fixed Deposit Time Calculator - Indian Banking System
        
        ## Purpose
        A comprehensive FD calculator designed for the Indian banking context that helps users 
        determine how long it will take to reach their financial goals through fixed deposits. 
        Provides detailed breakdowns, tax implications, and comparative analysis to make 
        informed investment decisions.
        
        ## Features
        - **Time Calculation**: Precise calculation showing Years, Months, Days to reach target
        - **Quarterly Compounding**: Standard Indian FD compounding frequency
        - **Maturity Breakdown**: Clear view of Principal + Interest earned
        - **TDS Information**: Automatic TDS calculation for applicable cases
        - **Rate Comparison**: Compare multiple FD rates side-by-side
        - **Visual Timeline**: Progress bars and visual indicators
        - **Validation**: Min/Max limits aligned with Indian banking norms
        - **Memory Retention**: Recall questions and learning aids
        - **Mobile Responsive**: Works seamlessly on all devices
        
        ## Calculation Method
        Uses compound interest formula with quarterly compounding:
        A = P(1 + r/n)^(nt)
        
        Where:
        - A = Target amount (maturity value)
        - P = Principal (initial deposit)
        - r = Annual interest rate (as decimal)
        - n = 4 (quarterly compounding)
        - t = Time in years (what we solve for)
        
        ## TDS Rules (Indian Context)
        - 10% TDS applies if total interest earned > ‚Çπ40,000 (individuals)
        - 10% TDS applies if total interest earned > ‚Çπ50,000 (senior citizens)
        - Form 15G/15H can be submitted if income is below taxable limit
        
        ## Typical FD Rates in India
        - Regular FD: 5.0% - 8.5% p.a.
        - Senior Citizen FD: 5.5% - 9.0% p.a.
        - Special schemes may offer higher rates
        
        ## Learning Features
        - Interactive recall questions after calculations
        - Formula explanations with examples
        - Comparison scenarios to understand rate impact
        - Tips for optimal FD investment strategies
        */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #1a237e;
            --secondary-blue: #3949ab;
            --accent-orange: #ff6f00;
            --success-green: #2e7d32;
            --warning-red: #c62828;
            --light-bg: #f5f7fa;
            --card-bg: #ffffff;
            --text-dark: #2d3748;
            --text-light: #718096;
            --border-color: #e2e8f0;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-dark);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
            animation: fadeIn 1s ease-in;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            margin-bottom: 5px;
        }

        .header .tagline {
            font-size: 0.95rem;
            opacity: 0.85;
            font-style: italic;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 25px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow-lg);
            animation: slideUp 0.6s ease-out;
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
        }

        .card-icon {
            font-size: 2rem;
        }

        .card-title {
            font-size: 1.6rem;
            color: var(--primary-blue);
            font-weight: 700;
        }

        .input-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .input-group {
            position: relative;
        }

        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-dark);
            font-size: 0.95rem;
        }

        .input-group .hint {
            font-size: 0.8rem;
            color: var(--text-light);
            font-weight: 400;
            margin-left: 5px;
        }

        .input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .input-prefix {
            position: absolute;
            left: 15px;
            color: var(--text-light);
            font-weight: 600;
            font-size: 1.1rem;
            pointer-events: none;
        }

        .input-suffix {
            position: absolute;
            right: 15px;
            color: var(--text-light);
            font-weight: 600;
            pointer-events: none;
        }

        .input-group input {
            width: 100%;
            padding: 14px 45px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--secondary-blue);
            box-shadow: 0 0 0 3px rgba(57, 73, 171, 0.1);
        }

        .input-group input:invalid {
            border-color: var(--warning-red);
        }

        .compounding-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .compound-option {
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .compound-option:hover {
            border-color: var(--secondary-blue);
            background: rgba(57, 73, 171, 0.05);
        }

        .compound-option.active {
            border-color: var(--secondary-blue);
            background: var(--secondary-blue);
            color: white;
        }

        .calculate-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--secondary-blue), var(--primary-blue));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(57, 73, 171, 0.4);
        }

        .result-display {
            display: none;
            margin-top: 30px;
        }

        .result-display.show {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        .time-result {
            background: linear-gradient(135deg, var(--secondary-blue), var(--primary-blue));
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 25px;
            box-shadow: var(--shadow-lg);
        }

        .time-result .label {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .time-result .time-value {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .time-breakdown {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }

        .time-unit {
            text-align: center;
        }

        .time-unit .number {
            font-size: 2rem;
            font-weight: 700;
            display: block;
        }

        .time-unit .label {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .breakdown-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .breakdown-item {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--secondary-blue);
        }

        .breakdown-item .label {
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 5px;
        }

        .breakdown-item .value {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--text-dark);
        }

        .breakdown-item.highlight {
            border-left-color: var(--success-green);
        }

        .breakdown-item.highlight .value {
            color: var(--success-green);
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: var(--light-bg);
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success-green), #66bb6a);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.85rem;
            transition: width 1s ease-out;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 0.9rem;
            color: #1565c0;
        }

        .warning-box {
            background: #fff3e0;
            border-left: 4px solid var(--accent-orange);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 0.9rem;
            color: #e65100;
        }

        .tds-info {
            background: #fce4ec;
            border-left: 4px solid var(--warning-red);
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 0.9rem;
            color: var(--warning-red);
        }

        .comparison-section {
            margin-top: 25px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .comparison-card {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .comparison-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .comparison-card.best {
            border-color: var(--success-green);
            background: linear-gradient(135deg, #e8f5e9, var(--light-bg));
        }

        .comparison-card .rate {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--secondary-blue);
            margin-bottom: 5px;
        }

        .comparison-card .time {
            font-size: 1.1rem;
            color: var(--text-dark);
            margin-bottom: 5px;
        }

        .comparison-card .diff {
            font-size: 0.85rem;
            color: var(--text-light);
        }

        .comparison-card .badge {
            display: inline-block;
            background: var(--success-green);
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 8px;
        }

        .recall-section {
            background: linear-gradient(135deg, #fff9c4, #fff59d);
            border: 2px solid #fbc02d;
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
        }

        .recall-section h3 {
            color: #f57f17;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .recall-question {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #fbc02d;
        }

        .recall-question .question {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-dark);
        }

        .recall-answer {
            display: none;
            padding: 10px;
            background: var(--light-bg);
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.9rem;
            color: var(--text-dark);
        }

        .reveal-btn {
            background: #fbc02d;
            color: #f57f17;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }

        .reveal-btn:hover {
            background: #f9a825;
        }

        .formula-section {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
        }

        .formula-section h4 {
            color: var(--primary-blue);
            margin-bottom: 10px;
        }

        .formula {
            font-family: 'Courier New', monospace;
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid var(--border-color);
            margin: 10px 0;
            font-size: 1.1rem;
            text-align: center;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .time-result .time-value {
                font-size: 2.5rem;
            }

            .breakdown-grid {
                grid-template-columns: 1fr;
            }

            .compounding-options {
                grid-template-columns: repeat(2, 1fr);
            }

            .time-breakdown {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè¶ Fixed Deposit Time Calculator</h1>
            <p class="subtitle">Indian Banking System | Quarterly Compounding</p>
            <p class="tagline">Discover how long it takes to reach your financial goals</p>
        </div>

        <div class="main-grid">
            <!-- Input Card -->
            <div class="card">
                <div class="card-header">
                    <span class="card-icon">üìä</span>
                    <h2 class="card-title">Enter FD Details</h2>
                </div>

                <div class="input-grid">
                    <div class="input-group">
                        <label>
                            Principal Amount
                            <span class="hint">(Enter any amount)</span>
                        </label>
                        <div class="input-wrapper">
                            <span class="input-prefix">‚Çπ</span>
                            <input type="number" id="principal" placeholder="100000" 
                                   value="100000" step="1000">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>
                            Interest Rate (Annual)
                            <span class="hint">(Enter your bank's rate)</span>
                        </label>
                        <div class="input-wrapper">
                            <input type="number" id="rate" placeholder="7.5" 
                                   value="7.5" step="0.25">
                            <span class="input-suffix">% p.a.</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label>
                            Target Amount
                            <span class="hint">(Your financial goal)</span>
                        </label>
                        <div class="input-wrapper">
                            <span class="input-prefix">‚Çπ</span>
                            <input type="number" id="target" placeholder="200000" 
                                   value="200000" step="1000">
                        </div>
                    </div>

                    <div class="input-group">
                        <label>Compounding Frequency</label>
                        <div class="compounding-options">
                            <div class="compound-option" onclick="selectCompounding('monthly', 12)">
                                Monthly<br><small>(12x/year)</small>
                            </div>
                            <div class="compound-option active" onclick="selectCompounding('quarterly', 4)">
                                Quarterly<br><small>(4x/year)</small>
                            </div>
                            <div class="compound-option" onclick="selectCompounding('half-yearly', 2)">
                                Half-Yearly<br><small>(2x/year)</small>
                            </div>
                            <div class="compound-option" onclick="selectCompounding('yearly', 1)">
                                Yearly<br><small>(1x/year)</small>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="calculate-btn" onclick="calculateFD()">
                    ‚è±Ô∏è Calculate Time Required
                </button>

                <div class="info-box">
                    üí° <strong>Quick Tip:</strong> Higher compounding frequency means your money grows faster! 
                    Quarterly compounding is standard for most Indian FDs. Enter any amount and rate to see your personalized timeline.
                </div>
            </div>

            <!-- Results Card -->
            <div class="card">
                <div class="card-header">
                    <span class="card-icon">‚è∞</span>
                    <h2 class="card-title">Time to Target</h2>
                </div>

                <div id="resultsContainer">
                    <div style="text-align: center; padding: 40px 20px; color: var(--text-light);">
                        <div style="font-size: 4rem; margin-bottom: 15px;">üéØ</div>
                        <p style="font-size: 1.1rem;">Enter your FD details and click calculate</p>
                        <p style="font-size: 0.9rem; margin-top: 10px;">We'll show you exactly how long it takes to reach your target!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Full Width Cards -->
        <div id="comparisonSection" class="card" style="display: none;">
            <div class="card-header">
                <span class="card-icon">üìà</span>
                <h2 class="card-title">Rate Comparison Analysis</h2>
            </div>
            <p style="margin-bottom: 20px; color: var(--text-light);">
                See how different interest rates affect the time needed to reach your target
            </p>
            <div id="comparisonGrid" class="comparison-grid"></div>
        </div>

        <div id="recallSection" class="card recall-section" style="display: none;">
            <h3>üß† Memory Retention Check</h3>
            <p style="margin-bottom: 20px; color: #f57f17;">
                Let's test what you've learned! These questions help reinforce your understanding.
            </p>
            <div id="recallQuestions"></div>
        </div>

        <div class="card formula-section">
            <h4>üìê Understanding the Formula</h4>
            <p style="margin-bottom: 15px; color: var(--text-light);">
                FD calculations use the compound interest formula:
            </p>
            <div class="formula">
                A = P √ó (1 + r/n)^(n√ót)
            </div>
            <div style="margin-top: 15px; font-size: 0.9rem; color: var(--text-dark);">
                <strong>Where:</strong><br>
                ‚Ä¢ <strong>A</strong> = Maturity Amount (your target)<br>
                ‚Ä¢ <strong>P</strong> = Principal (initial deposit)<br>
                ‚Ä¢ <strong>r</strong> = Annual interest rate (as decimal)<br>
                ‚Ä¢ <strong>n</strong> = Compounding frequency per year<br>
                ‚Ä¢ <strong>t</strong> = Time in years (what we calculate)
            </div>
        </div>
    </div>

    <script>
        let compoundingFrequency = 4; // Default: Quarterly
        let compoundingType = 'quarterly';

        function selectCompounding(type, frequency) {
            compoundingFrequency = frequency;
            compoundingType = type;
            
            // Update UI
            document.querySelectorAll('.compound-option').forEach(opt => {
                opt.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }

        function calculateTimeToTarget(principal, target, rate, n) {
            const P = parseFloat(principal);
            const A = parseFloat(target);
            const r = parseFloat(rate) / 100;
            
            // Formula: t = log(A/P) / (n * log(1 + r/n))
            const timeInYears = Math.log(A / P) / (n * Math.log(1 + r / n));
            
            const years = Math.floor(timeInYears);
            const remainingMonths = (timeInYears - years) * 12;
            const months = Math.floor(remainingMonths);
            const remainingDays = (remainingMonths - months) * 30;
            const days = Math.floor(remainingDays);

            return {
                totalYears: timeInYears,
                years: years,
                months: months,
                days: days
            };
        }

        function calculateMaturityAmount(principal, rate, n, time) {
            const P = parseFloat(principal);
            const r = parseFloat(rate) / 100;
            const t = parseFloat(time);
            
            // A = P(1 + r/n)^(nt)
            const amount = P * Math.pow(1 + r / n, n * t);
            return amount;
        }

        function calculateTDS(interest, isSenior = false) {
            const threshold = isSenior ? 50000 : 40000;
            if (interest > threshold) {
                return interest * 0.10; // 10% TDS
            }
            return 0;
        }

        function formatCurrency(amount) {
            return '‚Çπ' + amount.toLocaleString('en-IN', { 
                maximumFractionDigits: 0,
                minimumFractionDigits: 0
            });
        }

        function formatTime(years, months, days) {
            let parts = [];
            if (years > 0) parts.push(`${years} year${years > 1 ? 's' : ''}`);
            if (months > 0) parts.push(`${months} month${months > 1 ? 's' : ''}`);
            if (days > 0) parts.push(`${days} day${days > 1 ? 's' : ''}`);
            return parts.join(', ') || '0 days';
        }

        function calculateFD() {
            const principal = document.getElementById('principal').value;
            const rate = document.getElementById('rate').value;
            const target = document.getElementById('target').value;

            // Validation
            if (!principal || !rate || !target) {
                alert('Please fill in all fields');
                return;
            }

            if (parseFloat(target) <= parseFloat(principal)) {
                alert('Target amount must be greater than principal amount');
                return;
            }

            const time = calculateTimeToTarget(principal, target, rate, compoundingFrequency);
            const maturityAmount = parseFloat(target);
            const interest = maturityAmount - parseFloat(principal);
            const tds = calculateTDS(interest);
            const netInterest = interest - tds;

            displayResults(principal, rate, target, time, interest, tds, netInterest);
            generateComparison(principal, target, rate, time);
            generateRecallQuestions(principal, rate, target, time, compoundingType);
        }

        function displayResults(principal, rate, target, time, interest, tds, netInterest) {
            const container = document.getElementById('resultsContainer');
            
            const timeString = formatTime(time.years, time.months, time.days);
            const growthPercent = ((parseFloat(target) / parseFloat(principal) - 1) * 100).toFixed(1);

            let html = `
                <div class="result-display show">
                    <div class="time-result">
                        <div class="label">Time Required to Reach Target</div>
                        <div class="time-value">${timeString}</div>
                        <div class="time-breakdown">
                            ${time.years > 0 ? `
                                <div class="time-unit">
                                    <span class="number">${time.years}</span>
                                    <span class="label">Year${time.years > 1 ? 's' : ''}</span>
                                </div>
                            ` : ''}
                            ${time.months > 0 ? `
                                <div class="time-unit">
                                    <span class="number">${time.months}</span>
                                    <span class="label">Month${time.months > 1 ? 's' : ''}</span>
                                </div>
                            ` : ''}
                            ${time.days > 0 ? `
                                <div class="time-unit">
                                    <span class="number">${time.days}</span>
                                    <span class="label">Day${time.days > 1 ? 's' : ''}</span>
                                </div>
                            ` : ''}
                        </div>
                    </div>

                    <div class="breakdown-grid">
                        <div class="breakdown-item">
                            <div class="label">Principal Amount</div>
                            <div class="value">${formatCurrency(parseFloat(principal))}</div>
                        </div>
                        <div class="breakdown-item highlight">
                            <div class="label">Maturity Amount</div>
                            <div class="value">${formatCurrency(parseFloat(target))}</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="label">Interest Earned</div>
                            <div class="value">${formatCurrency(interest)}</div>
                        </div>
                        <div class="breakdown-item">
                            <div class="label">Growth Rate</div>
                            <div class="value">${growthPercent}%</div>
                        </div>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${Math.min((interest / parseFloat(target)) * 100, 100)}%">
                            ${((interest / parseFloat(target)) * 100).toFixed(1)}% Returns
                        </div>
                    </div>

                    ${tds > 0 ? `
                        <div class="tds-info">
                            <strong>‚ö†Ô∏è TDS Applicable:</strong><br>
                            Your interest income (${formatCurrency(interest)}) exceeds ‚Çπ40,000, so 10% TDS will apply.<br>
                            <strong>TDS Amount:</strong> ${formatCurrency(tds)}<br>
                            <strong>Net Interest:</strong> ${formatCurrency(netInterest)}<br>
                            <small>üí° Tip: Submit Form 15G/15H if your income is below taxable limit to avoid TDS deduction.</small>
                        </div>
                    ` : `
                        <div class="info-box">
                            ‚úÖ <strong>No TDS Applicable:</strong> Your interest income is below ‚Çπ40,000 threshold.
                        </div>
                    `}

                    <div class="info-box">
                        üìä <strong>Compounding:</strong> ${compoundingType.charAt(0).toUpperCase() + compoundingType.slice(1)} (${compoundingFrequency}x per year)<br>
                        üí∞ <strong>Effective Rate:</strong> ${rate}% per annum<br>
                        üéØ <strong>Investment Horizon:</strong> ${time.totalYears.toFixed(2)} years
                    </div>
                </div>
            `;

            container.innerHTML = html;
        }

        function generateComparison(principal, target, baseRate, baseTime) {
            const comparisonSection = document.getElementById('comparisonSection');
            const grid = document.getElementById('comparisonGrid');
            
            const rates = [
                parseFloat(baseRate) - 1,
                parseFloat(baseRate),
                parseFloat(baseRate) + 1
            ];

            let html = '';
            let bestTime = Infinity;

            rates.forEach(rate => {
                const time = calculateTimeToTarget(principal, target, rate, compoundingFrequency);
                const isBest = rate === parseFloat(baseRate);
                
                if (time.totalYears < bestTime) {
                    bestTime = time.totalYears;
                }

                const timeString = formatTime(time.years, time.months, time.days);
                const diff = time.totalYears - baseTime.totalYears;
                const diffText = diff > 0 
                    ? `+${(diff * 12).toFixed(0)} months slower` 
                    : diff < 0 
                    ? `${Math.abs(diff * 12).toFixed(0)} months faster`
                    : 'Your selected rate';

                html += `
                    <div class="comparison-card ${isBest ? 'best' : ''}">
                        <div class="rate">${rate.toFixed(2)}%</div>
                        <div class="time">${timeString}</div>
                        <div class="diff">${diffText}</div>
                        ${isBest ? '<span class="badge">‚úì Your Rate</span>' : ''}
                    </div>
                `;
            });

            grid.innerHTML = html;
            comparisonSection.style.display = 'block';
        }

        function generateRecallQuestions(principal, rate, target, time, compoundingType) {
            const recallSection = document.getElementById('recallSection');
            const questionsContainer = document.getElementById('recallQuestions');
            
            const questions = [
                {
                    q: 'What is the compounding frequency for your FD calculation?',
                    a: `${compoundingType.charAt(0).toUpperCase() + compoundingType.slice(1)} compounding means interest is calculated ${compoundingFrequency} times per year. More frequent compounding leads to higher returns due to earning "interest on interest" more often.`
                },
                {
                    q: 'Why does your FD take approximately ' + time.years + ' years to reach the target?',
                    a: `At ${rate}% annual interest with ${compoundingType} compounding, your principal of ${formatCurrency(parseFloat(principal))} grows to ${formatCurrency(parseFloat(target))}. The time depends on the growth rate: higher rates = faster growth.`
                },
                {
                    q: 'What happens if the interest rate increases by 1%?',
                    a: `Increasing the rate from ${rate}% to ${parseFloat(rate) + 1}% would significantly reduce the time needed to reach your target. Even small rate differences compound over time, making a big impact on long-term investments.`
                },
                {
                    q: 'When does TDS apply on FD interest?',
                    a: `TDS (Tax Deducted at Source) of 10% applies when total interest income from FDs exceeds ‚Çπ40,000 in a financial year (‚Çπ50,000 for senior citizens). Banks deduct this automatically. You can submit Form 15G/15H to prevent deduction if your income is below the taxable limit.`
                }
            ];

            let html = '';
            questions.forEach((item, index) => {
                html += `
                    <div class="recall-question">
                        <div class="question">ü§î ${item.q}</div>
                        <button class="reveal-btn" onclick="toggleAnswer(${index})">Show Answer</button>
                        <div class="recall-answer" id="answer-${index}">
                            <strong>üí° Answer:</strong> ${item.a}
                        </div>
                    </div>
                `;
            });

            questionsContainer.innerHTML = html;
            recallSection.style.display = 'block';
        }

        function toggleAnswer(index) {
            const answer = document.getElementById(`answer-${index}`);
            const button = event.target;
            
            if (answer.style.display === 'block') {
                answer.style.display = 'none';
                button.textContent = 'Show Answer';
            } else {
                answer.style.display = 'block';
                button.textContent = 'Hide Answer';
            }
        }

        // Input validation for target > principal
        document.getElementById('target').addEventListener('input', function(e) {
            const principal = parseFloat(document.getElementById('principal').value);
            if (this.value <= principal) {
                this.style.borderColor = 'var(--warning-red)';
            } else {
                this.style.borderColor = 'var(--border-color)';
            }
        });

        // Auto-calculate on Enter key
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    calculateFD();
                }
            });
        });
    </script>
</body>
</html>
